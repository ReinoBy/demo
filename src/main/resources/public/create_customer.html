<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kliendi loomine - KoduPank</title>
</head>
<body>

<p>Sisesta kliendi andmed</p>
Eesnimi: <input id="f_name"><br>
Perekonnanimi: <input id="l_name"><br>
Isikukoood: <input id="i_kood"><br>
Aadress: <input id="address"><br>
Telefon: <input id="phone"><br>
email: <input id="email"><br>

<button id="save_customer" type="button">Salvesta kliendi andmed</button>

<div id="vastus">
</div>

</body>
<script>
    function createCustomer() {
        let newCustomer = {
            firstName: document.getElementById("f_name").value,
            lastName: document.getElementById("l_name").value,
            isikukood: document.getElementById("i_kood").value,
            aadress: document.getElementById("address").value,
            telefon: document.getElementById("phone").value,
            email: document.getElementById("email").value
        }

        let posturl = "/hibernate/bank/customer/";

        fetch(posturl,
            {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(newCustomer)
            })
            .then(result => result.json())
            .then(function (result) {
                // siia tuleb koht, kuhu vaja kirjutada, mis kliendile vaja n√§idata
                document.getElementById("vastus").innerHTML =
                    '<div id = "vastus2">'
                    + result.message +
                    '</div>'
            });

    }

    let element = document.getElementById("save_customer");
    element.addEventListener("click", createCustomer)

</script>
</html>






